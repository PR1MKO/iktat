{% macro attr(obj, name) %}
  {{ getattr(obj, name, '') }}
{% endmacro %}

{% macro csrf_hidden(form=None) -%}
  {% if form is defined and form and (form.csrf_token is defined) %}
    {{ form.csrf_token }}
  {% elif csrf_token is defined %}
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  {% else %}
    {# fallback to avoid UndefinedError in non-CSRF smoke renders #}
    <input type="hidden" name="csrf_token" value="">
  {% endif %}
{%- endmacro %}
 