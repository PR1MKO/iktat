{% extends "base.html" %}
{% import 'includes/case_macros.html' as cm %}

{% block title %}Iroda Dashboard ‚Äì CaseTracker{% endblock %}

{% block content %}
<div class="card-body d-flex align-items-center py-3">
  <i class="bi bi-person-check fs-3 me-3 text-primary"></i>
  <div>
    <h3 class="h4 mb-0"><small>Kezd≈ëlap:</small> Iroda</h4>
  </div>
</div>

<p>
  <a class="btn btn-success text-white d-inline-flex align-items-center" href="{{ url_for('auth.create_case') }}">
    <i class="bi bi-plus-circle me-2"></i> √öj √ºgy r√∂gz√≠t√©se
  </a>
</p>

<hr>

<div class="row mb-4 g-3">
  <div class="col-md-6">
    {{ cm.dashboard_card(
      'K√©s√©sben (hat√°rid≈ë lej√°rt)',
      overdue_cases,
      icon='bi bi-bell-fill',
      icon_class='text-danger',
      value_format='%Y-%m-%d'
    ) }}
  </div>
  <div class="col-md-6">
    {{ cm.dashboard_card(
      'üóì K√∂zelg≈ë hat√°rid≈ëk (14 napon bel√ºl)',
      upcoming_deadlines
    ) }}
  </div>
</div>

<div class="row mb-4 g-3">
	<div class="col-md-6">
	  {{ cm.dashboard_card(
		'üìä Gyors statisztik√°k',
		items=[
		  ('√öj √ºgyek ma', new_today),
		  ('√öj √ºgyek ezen a h√©ten', new_this_week),
		  ('√öj √ºgyek ebben a h√≥napban', new_this_month),
		  ('Nyitott √ºgyek', total_open),
		  ('Lez√°rt √ºgyek', closed_cases)
		]
	  ) }}
	</div>
  <div class="col-md-6">
    {{ cm.dashboard_card(
      'üü° √Ållapot szerinti bont√°s',
      items=status_counts_list
    ) }}
  </div>
</div>

{% endblock %}
 